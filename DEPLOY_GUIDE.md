# 部署方案快速指南

本文档帮助你快速选择最适合的部署方案。

## 🎯 快速选择

### 我应该选择哪个平台？

```
┌─────────────────────────────────────────┐
│  你需要什么？                            │
└─────────────────────────────────────────┘
           │
           ├─→ 国内用户 + 长期免费？
           │   └─→ ✅ Zeabur（最推荐）
           │
           ├─→ 完全免费 + 不介意休眠？
           │   └─→ ✅ Render
           │
           ├─→ 愿意付费 + 需要稳定？
           │   └─→ ✅ Railway 或 自建 VPS
           │
           └─→ 追求极致性能？
               └─→ ✅ 自建 VPS
```

---

## 📊 平台对比

| 特性 | Zeabur | Railway | Render | Vercel | 自建 VPS |
|------|--------|---------|--------|--------|----------|
| **免费额度** | ✅ $5/月（持续） | ⚠️ $5（一次性） | ✅ 750h/月 | ⚠️ 250MB | - |
| **需要信用卡** | ✅ 不需要 | ❌ 需要 | ✅ 不需要 | ✅ 不需要 | - |
| **休眠问题** | ✅ 不休眠 | ✅ 不休眠 | ❌ 15分钟休眠 | ❌ 无状态 | ✅ 不休眠 |
| **国内访问** | ✅ 快（香港） | ⚠️ 慢（美国） | ⚠️ 慢（美国） | ✅ 快 | ✅ 最快 |
| **中文支持** | ✅ 完整 | ❌ 无 | ❌ 无 | ❌ 无 | - |
| **功能完整性** | ✅ 100% | ✅ 100% | ✅ 100% | ⚠️ 受限 | ✅ 100% |
| **手机访问** | ✅ 完美 | ✅ 完美 | ✅ 完美 | ✅ 完美 | ✅ 完美 |
| **部署难度** | ⭐ 简单 | ⭐ 简单 | ⭐ 简单 | ⭐⭐ 中等 | ⭐⭐⭐ 复杂 |
| **推荐指数** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐⭐⭐ |

---

## 🚀 Zeabur 部署（最推荐）

### 为什么最推荐 Zeabur？

- ✅ **国内友好**：香港节点，ping < 50ms
- ✅ **真正免费**：每月 $5 免费额度（持续，不是一次性）
- ✅ **无需信用卡**：注册即可使用
- ✅ **不会休眠**：访问即时响应
- ✅ **中文支持**：完整的中文界面和文档
- ✅ **部署简单**：3 分钟完成
- ✅ **功能完整**：所有功能都能用

### 快速开始

1. **注册账号**：[zeabur.com](https://zeabur.com/)（无需信用卡）
2. **创建项目**：选择香港节点
3. **部署服务**：从 GitHub 一键部署
4. **配置数据库**：添加 Supabase PostgreSQL（推荐）
5. **开始使用**：获得公网域名

**详细步骤：** 查看 [DEPLOY_ZEABUR.md](./DEPLOY_ZEABUR.md)

---

## ⚠️ Railway 部署（备选）

### 适合场景

- 愿意绑定信用卡验证
- 不介意一次性 $5 额度
- 需要美国节点

### 主要限制

- ⚠️ 需要绑定信用卡（不扣费，仅验证）
- ⚠️ 只有 $5 一次性额度（不是每月）
- ⚠️ 服务器在美国，国内访问较慢

### 快速开始

1. **注册账号**：[railway.app](https://railway.app/)
2. **验证账号**：绑定信用卡（不扣费）
3. **部署项目**：从 GitHub 一键部署
4. **配置数据库**：添加 PostgreSQL（可选）
5. **开始使用**：获得公网域名

**详细步骤：** 查看 [DEPLOY_RAILWAY.md](./DEPLOY_RAILWAY.md)

---

## ⚠️ Render 部署（备选）

### 适合场景

- 只是测试一下
- 不介意首次访问慢
- 不需要频繁访问

### 主要限制

- ❌ 15 分钟无访问会休眠
- ⚠️ 首次访问需要 30-60 秒唤醒
- ⚠️ 重启会丢失数据

### 快速开始

1. **注册账号**：[render.com](https://render.com/)
2. **部署项目**：从 GitHub 一键部署
3. **配置数据库**：添加 PostgreSQL（推荐）
4. **配置 UptimeRobot**：定期 ping 防止休眠

**详细步骤：** 查看 [DEPLOY_RENDER.md](./DEPLOY_RENDER.md)

---

## ❌ Vercel 部署（不推荐）

### 为什么不推荐？

- ❌ Token 自动刷新功能无法工作
- ⚠️ WebSocket 功能受限（10秒超时）
- ⚠️ 包大小接近限制（250 MB）
- ⚠️ 必须使用外部数据库

### 适合场景

- 只需要基础 API 功能
- 不需要 Token 自动刷新
- 不需要 WebSocket

**结论：不推荐使用 Vercel**

---

## 🖥️ 自建 VPS（最佳方案）

### 为什么是最佳方案？

- ✅ **完全控制**：所有功能都能用
- ✅ **性能最好**：无限制
- ✅ **稳定性高**：不会休眠
- ✅ **成本可控**：最低 $3.5/月

### 推荐 VPS 服务商

| 服务商 | 价格 | 配置 | 适合地区 |
|--------|------|------|----------|
| [Vultr](https://www.vultr.com/) | $3.5/月 | 512MB RAM | 全球 |
| [DigitalOcean](https://www.digitalocean.com/) | $4/月 | 512MB RAM | 全球 |
| [腾讯云](https://cloud.tencent.com/) | ¥99/年 | 1GB RAM | 中国 |
| [阿里云](https://www.aliyun.com/) | ¥99/年 | 1GB RAM | 中国 |

### 快速开始

```bash
# 1. 连接 VPS
ssh root@your-server-ip

# 2. 安装 Docker
curl -fsSL https://get.docker.com | sh

# 3. 克隆项目
git clone https://github.com/chenyme/grok2api
cd grok2api

# 4. 启动服务
docker compose up -d

# 5. 访问服务
http://your-server-ip:8000
```

---

## 📱 手机访问说明

### 所有平台都支持手机访问！

无论你选择哪个平台，都可以在手机浏览器访问：

**访问方式：**
1. 直接输入域名
2. 扫描二维码（推荐）
3. 添加到主屏幕（像 App 一样使用）

**支持的浏览器：**
- ✅ Safari (iOS)
- ✅ Chrome (Android/iOS)
- ✅ Firefox
- ✅ Edge
- ✅ 微信浏览器

---

## 🗄️ 数据持久化

### 为什么需要数据持久化？

所有云平台（Zeabur、Railway、Render）重启后都会丢失本地数据，因此需要外部数据库。

### 推荐方案

**Zeabur 用户：**
- ✅ 使用 Supabase PostgreSQL（免费 500 MB，推荐）
- ✅ 或使用其他外部数据库

**Railway 用户：**
- ✅ 使用 Railway PostgreSQL（一键添加）
- ✅ 或使用 Supabase（免费 500 MB）

**Render 用户：**
- ✅ 使用 Render PostgreSQL（一键添加）
- ✅ 或使用 Supabase（免费 500 MB）

**VPS 用户：**
- ✅ 使用本地 PostgreSQL（Docker Compose）
- ✅ 或使用外部数据库

---

## 💰 费用对比

### Zeabur

- **免费额度**：$5/月（持续）
- **预计费用**：
  - 轻度使用：$0/月（免费额度足够）
  - 中度使用：$0-2/月
  - 重度使用：$3-10/月

### Railway

- **免费额度**：$5（一次性，不是每月）
- **预计费用**：
  - 轻度使用：用完 $5 后需付费
  - 中度使用：$5-10/月
  - 重度使用：$10-20/月

### Render

- **免费额度**：750 小时/月
- **预计费用**：
  - 免费版：$0/月（会休眠）
  - Starter：$7/月（不休眠）

### Vercel

- **免费额度**：250 MB 部署大小
- **预计费用**：
  - Hobby：$0/月（功能受限）
  - Pro：$20/月

### 自建 VPS

- **预计费用**：
  - 国外 VPS：$3.5-5/月
  - 国内 VPS：¥99-199/年

---

## 🎯 推荐方案总结

### 个人使用（最推荐）

```
Zeabur + Supabase PostgreSQL
```

**优点：**
- ✅ 长期免费（$5/月持续额度）
- ✅ 国内访问快（香港节点）
- ✅ 无需信用卡
- ✅ 不会休眠
- ✅ 部署简单
- ✅ 功能完整

### 团队使用（推荐）

```
Zeabur 或 自建 VPS
```

**优点：**
- ✅ 稳定可靠
- ✅ 性能更好
- ✅ 可扩展

### 测试使用

```
Render（免费版）
```

**优点：**
- ✅ 完全免费
- ⚠️ 会休眠（可接受）

---

## 📚 详细文档

- **Zeabur 部署指南**：[DEPLOY_ZEABUR.md](./DEPLOY_ZEABUR.md)（最推荐）
- **Railway 部署指南**：[DEPLOY_RAILWAY.md](./DEPLOY_RAILWAY.md)
- **Render 部署指南**：[DEPLOY_RENDER.md](./DEPLOY_RENDER.md)
- **Supabase 数据库配置**：[DEPLOY_SUPABASE.md](./DEPLOY_SUPABASE.md)
- **项目文档**：[README.md](./readme.md)
- **更新日志**：[CHANGELOG.md](./CHANGELOG.md)

---

## ❓ 常见问题

### Q1: Zeabur、Railway 和 Render 哪个更好？

**A:** Zeabur 最好！特别适合国内用户：
- ✅ 香港节点，访问快
- ✅ 每月 $5 持续免费额度
- ✅ 无需信用卡
- ✅ 不会休眠

Railway 只有 $5 一次性额度，用完需付费。Render 会休眠，首次访问慢。

### Q2: 需要绑定信用卡吗？

**A:**
- **Zeabur**：不需要 ✅
- **Railway**：需要（不扣费，只是验证）❌
- **Render**：不需要 ✅

### Q3: 手机可以访问吗？

**A:** 可以！所有平台都支持手机浏览器访问。

### Q4: 数据会丢失吗？

**A:** 如果不配置外部数据库，重启会丢失。建议配置 Supabase PostgreSQL（免费 500 MB）。

### Q5: 免费额度够用吗？

**A:**
- **Zeabur**：$5/月持续额度，轻度使用完全免费 ✅
- **Railway**：$5 一次性额度，用完需付费 ⚠️
- **Render**：750 小时/月，但会休眠 ⚠️

### Q6: 国内访问快吗？

**A:**
- **Zeabur**：香港节点，ping < 50ms，非常快 ✅
- **Railway**：美国节点，国内访问较慢 ⚠️
- **Render**：美国节点，国内访问较慢 ⚠️

如果追求极致速度，建议自建国内 VPS。

### Q7: 可以自定义域名吗？

**A:** 可以！Zeabur、Railway 和 Render 都支持自定义域名。

### Q8: 如何更新版本？

**A:** 推送代码到 GitHub，平台会自动重新部署。

---

## 🆘 获取帮助

- **GitHub Issues**：[提交问题](https://github.com/chenyme/grok2api/issues)
- **项目文档**：[README.md](./readme.md)
- **Railway 文档**：[docs.railway.app](https://docs.railway.app/)
- **Render 文档**：[render.com/docs](https://render.com/docs)

---

**选择你喜欢的方案，开始部署吧！** 🚀
